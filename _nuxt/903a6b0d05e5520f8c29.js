(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{912:function(n,t,r){var e=function(){throw"This swarm.js function isn't available on the browser."},o={readFile:e},c={download:e,safeDownloadArchived:e,directoryTree:e},f={platform:e,arch:e},path={join:e,slice:e},d={spawn:e},l={lookup:e},h=r(913),m=r(465),v=r(942),y=r(944),w=r(945);n.exports=w({fs:o,files:c,os:f,path:path,child_process:d,defaultArchives:{},mimetype:l,request:h,downloadUrl:null,bytes:m,hash:v,pick:y})},942:function(n,t,r){var e=r(943).keccak256,o=r(465),c=function(n,data){var t=o.reverse(o.pad(6,o.fromNumber(n))),r=o.flatten([t,"0x0000",data]);return e(r).slice(2)};n.exports=function n(data){"string"==typeof data&&"0x"!==data.slice(0,2)?data=o.fromString(data):"string"!=typeof data&&void 0!==data.length&&(data=o.fromUint8Array(data));var t=o.length(data);if(t<=4096)return c(t,data);for(var r=4096;128*r<t;)r*=128;for(var e=[],i=0;i<t;i+=r){var f=r<t-i?r:t-i;e.push(n(o.slice(data,i,i+f)))}return c(t,o.flatten(e))}},944:function(n,t){var r=function(n){return function(){return new Promise((function(t,r){var e,o=function(r){var e={},o=r.target.files.length,c=0;[].map.call(r.target.files,(function(r){var f=new FileReader;f.onload=function(f){var data=new Uint8Array(f.target.result);if("directory"===n){var path=r.webkitRelativePath;e[path.slice(path.indexOf("/")+1)]={type:"text/plain",data:data},++c===o&&t(e)}else if("file"===n){var d=r.webkitRelativePath;t({type:mimetype.lookup(d),data:data})}else t(data)},f.readAsArrayBuffer(r)}))};"directory"===n?((e=document.createElement("input")).addEventListener("change",o),e.type="file",e.webkitdirectory=!0,e.mozdirectory=!0,e.msdirectory=!0,e.odirectory=!0,e.directory=!0):((e=document.createElement("input")).addEventListener("change",o),e.type="file");var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),e.dispatchEvent(c)}))}};n.exports={data:r("data"),file:r("file"),directory:r("directory")}},945:function(n,t){n.exports=function(n){var t=n.fs,r=n.files,e=n.os,path=n.path,o=n.child_process,c=n.mimetype,f=n.defaultArchives,d=n.request,l=n.downloadUrl,h=n.bytes,m=n.hash,v=n.pick,y=function(n){return function(t){for(var map={},i=0,r=n.length;i<r;++i)map[n[i]]=t[i];return map}},w=function(n){return function(t){return"".concat(n,"/bzz-raw:/").concat(t)}},k=function(n){return function(t){return new Promise((function(r,e){d(w(n)(t),{responseType:"arraybuffer"},(function(n,t,o){return n?e(n):o.statusCode>=400?e(new Error("Error ".concat(o.statusCode,"."))):r(new Uint8Array(t))}))}))}},D=function(n){return function(t){return function t(r){return function(path){return function(e){var o=function(n){return void 0===n.path?Promise.resolve():"application/bzz-manifest+json"===n.contentType?t(n.hash)(path+n.path)(e):Promise.resolve((r=path+n.path,function(n){return function(map){return map[r]=n,map}})(function(n){return{type:n.contentType,hash:n.hash}}(n))(e));var r};return k(n)(r).then((function(text){return JSON.parse(G(text)).entries})).then((function(n){return Promise.all(n.map(o))})).then((function(){return e}))}}}(t)("")({})}},P=function(n){return function(t){return D(n)(t).then((function(n){return y(Object.keys(n))(Object.keys(n).map((function(t){return n[t].hash})))}))}},T=function(n){return function(t){return D(n)(t).then((function(t){var r=Object.keys(t),e=r.map((function(path){return t[path].hash})),o=r.map((function(path){return t[path].type})),c=e.map(k(n));return Promise.all(c).then((function(n){return y(r)(function(n){return n.map((function(data,i){return{type:o[i],data:data}}))}(n))}))}))}},A=function(n){return function(t){return function(e){return r.download(w(n)(t))(e)}}},F=function(n){return function(t){return function(r){return P(n)(t).then((function(t){var e=[];for(var o in t)if(o.length>0){var c=path.join(r,o);e.push(A(n)(t[o])(c))}return Promise.all(e).then((function(){return r}))}))}}},x=function(n){return function(data){return new Promise((function(t,r){var e={body:"string"==typeof data?K(data):data,method:"POST"};d("".concat(n,"/bzz-raw:/"),e,(function(n,data){return n?r(n):t(data)}))}))}},E=function(n){return function(t){return function(r){return function(e){return function o(c){var f="/"===r[0]?r:"/"+r,l="".concat(n,"/bzz:/").concat(t).concat(f),h={method:"PUT",headers:{"Content-Type":e.type},body:e.data};return new Promise((function(n,t){d(l,h,(function(r,data){return r?t(r):-1!==data.indexOf("error")?t(data):n(data)}))})).catch((function(n){return c>0&&o(c-1)}))}(3)}}}},S=function(n){return function(t){return O(n)({"":t})}},z=function(n){return function(r){return t.readFile(r).then((function(data){return S(n)({type:c.lookup(r),data:data})}))}},O=function(n){return function(t){return x(n)("{}").then((function(r){return Object.keys(t).reduce((function(r,e){return r.then(function(r){return function(e){return E(n)(e)(r)(t[r])}}(e))}),Promise.resolve(r))}))}},j=function(n){return function(r){return t.readFile(r).then(x(n))}},L=function(n){return function(e){return function(o){return r.directoryTree(o).then((function(n){return Promise.all(n.map((function(path){return t.readFile(path)}))).then((function(t){var r=n.map((function(path){return path.slice(o.length)})),e=n.map((function(path){return c.lookup(path)||"text/plain"}));return y(r)(t.map((function(data,i){return{type:e[i],data:data}})))}))})).then((function(n){return(a=e?{"":n[e]}:{},function(b){var map={};for(var n in a)map[n]=a[n];for(var t in b)map[t]=b[t];return map})(n);var a})).then(O(n))}}},U=function(n){return function(t){if("data"===t.pick)return v.data().then(x(n));if("file"===t.pick)return v.file().then(S(n));if("directory"===t.pick)return v.directory().then(O(n));if(t.path)switch(t.kind){case"data":return j(n)(t.path);case"file":return z(n)(t.path);case"directory":return L(n)(t.defaultFile)(t.path)}else{if(t.length||"string"==typeof t)return x(n)(t);if(t instanceof Object)return O(n)(t)}return Promise.reject(new Error("Bad arguments"))}},M=function(n){return function(t){return function(path){return N(n)(t).then((function(r){return r?path?F(n)(t)(path):T(n)(t):path?A(n)(t)(path):k(n)(t)}))}}},R=function(path,n){var t=e.platform().replace("win32","windows")+"-"+("x64"===e.arch()?"amd64":"386"),o=(n||f)[t],c=l+o.archive+".tar.gz",d=o.archiveMD5,h=o.binaryMD5;return r.safeDownloadArchived(c)(d)(h)(path)},C=function(n){return new Promise((function(t,r){var e=o.spawn,c=function(n){return function(t){return-1!==(""+t).indexOf(n)}},f=n.account,d=n.password,l=n.dataDir,h=n.ensApi,m=n.privateKey,v=0,y=e(n.binPath,["--bzzaccount",f||m,"--datadir",l,"--ens-api",h]),w=function(data){0===v&&c("Passphrase")(data)?setTimeout((function(){v=1,y.stdin.write(d+"\n")}),500):c("Swarm http proxy started")(data)&&(v=2,clearTimeout(k),t(y))};y.stdout.on("data",w),y.stderr.on("data",w);var k=setTimeout((function(){return r(new Error("Couldn't start swarm process."))}),2e4)}))},I=function(n){return new Promise((function(t,r){n.stderr.removeAllListeners("data"),n.stdout.removeAllListeners("data"),n.stdin.removeAllListeners("error"),n.removeAllListeners("error"),n.removeAllListeners("exit"),n.kill("SIGINT");var e=setTimeout((function(){return n.kill("SIGKILL")}),8e3);n.once("close",(function(){clearTimeout(e),t()}))}))},J=function(n){return x(n)("test").then((function(n){return"c9a99c7d326dcc6316f32fe2625b311f6dc49a175e6877681ded93137d3569e7"===n})).catch((function(){return!1}))},N=function(n){return function(t){return k(n)(t).then((function(data){try{return!!JSON.parse(G(data)).entries}catch(n){return!1}}))}},B=function(n){return function(a,b,t,r,e){var p;return void 0!==a&&(p=n(a)),void 0!==b&&(p=n(b)),void 0!==t&&(p=n(t)),void 0!==r&&(p=n(r)),void 0!==e&&(p=n(e)),p}},G=function(n){return h.toString(h.fromUint8Array(n))},K=function(n){return h.toUint8Array(h.fromString(n))},_=function(n){return{download:function(t,path){return M(n)(t)(path)},downloadData:B(k(n)),downloadDataToDisk:B(A(n)),downloadDirectory:B(T(n)),downloadDirectoryToDisk:B(F(n)),downloadEntries:B(D(n)),downloadRoutes:B(P(n)),isAvailable:function(){return J(n)},upload:function(t){return U(n)(t)},uploadData:B(x(n)),uploadFile:B(S(n)),uploadFileFromDisk:B(S(n)),uploadDataFromDisk:B(j(n)),uploadDirectory:B(O(n)),uploadDirectoryFromDisk:B(L(n)),uploadToManifest:B(E(n)),pick:v,hash:m,fromString:K,toString:G}};return{at:_,local:function(n){return function(t){return J("http://localhost:8500").then((function(r){return r?t(_("http://localhost:8500")).then((function(){})):R(n.binPath,n.archives).onData((function(data){return(n.onProgress||function(){})(data.length)})).then((function(){return C(n)})).then((function(n){return t(_("http://localhost:8500")).then((function(){return n}))})).then(I)}))}},download:M,downloadBinary:R,downloadData:k,downloadDataToDisk:A,downloadDirectory:T,downloadDirectoryToDisk:F,downloadEntries:D,downloadRoutes:P,isAvailable:J,startProcess:C,stopProcess:I,upload:U,uploadData:x,uploadDataFromDisk:j,uploadFile:S,uploadFileFromDisk:z,uploadDirectory:O,uploadDirectoryFromDisk:L,uploadToManifest:E,pick:v,hash:m,fromString:K,toString:G}}}}]);